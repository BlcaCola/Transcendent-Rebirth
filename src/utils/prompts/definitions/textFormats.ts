/**
 * @fileoverview 文本格式规范
 */

export const TEXT_FORMAT_MARKERS = `
# 文本格式标记

- 环境描写: \`【...】\`
- 内心思考: \`\`...\`\`
- 角色对话: \`"..."\`
- 系统判定: \`〖...〗\`
`.trim()

export const DICE_ROLLING_RULES = `
# 通用判定系统 v6.0

## 1. 核心公式
**最终判定值 = 基础判定值 + 环境修正 + 状态修正 + 幸运骰子**

### 基础判定值
基础值 = 素质加权 + 等级加成 + 技艺加成

### 环境修正（根据判定类型）
**前端已计算**：系统会在"本回合判定数据"的"环境修正"中提供各类判定的环境加成

**直接使用对应值**：
- 训练/晋升 → 使用"训练/晋升"值
- 改造/制造 → 使用"改造/制造"值
- 战斗 → 使用"战斗"值
- 探索/社交 → 固定为 0

计算公式（仅供理解）：
| 判定类型 | 信号强度影响 | 说明 |
|---------|-------------|------|
| 训练晋升 | (强度-50)/10 | 强度80→+3，强度20→-3 |
| 改造制造 | (强度-50)/15 | 信号影响系统稳定 |
| 战斗 | (强度-50)/20 | 信号充沛利于协同 |
| 探索/社交 | 0 | 不受影响 |

### 状态修正（累加）

**基础状态（从属性百分比计算）**
| 状态 | 修正值 | 说明 |
|-----|-------|------|
| 生命值<50% | -5 | 受伤影响发挥 |
| 生命值<25% | -15 | 重伤严重削弱 |
| 电量<30% | -8 | 电量不足影响系统 |
| 带宽<30% | -10 | 带宽枯竭影响判断 |

**存档状态效果（从角色.效果数组读取）**
- buff类型：根据强度(0-100)给予 +1~+10 修正
- debuff类型：根据强度(0-100)给予 -1~-10 修正
- 公式：修正值 = (强度/100) × 10 × (buff为+1，debuff为-1)
- 多个状态效果累加，但总修正限制在 -20~+20 范围内

### 幸运骰子（随机数）
- **前端已计算**：系统会在"本回合判定数据"中提供计算好的骰子加成
- **直接使用**：判定时直接使用提供的"骰子加成"值，**不要自己计算**
- 计算公式（仅供理解）：
  - 原始骰子(1-100) × 幸运系数(1 + 幸运/100) = 修正后骰子
  - (修正后骰子 - 50) / 5 = 骰子加成

## 2. 触发判定的场景
**需要判定**：战斗攻防 | 改造制造 | 训练晋升 | 危险探索 | 社交博弈 | 躲避危险
**无需判定**：日常行为 | 跨阶压制(差2级以上) | 纯叙事

## 3. 属性加权表
| 判定类型 | 主属性×0.5 | 副属性×0.3 | 辅属性×0.2 |
|---------|-----------|-----------|-----------|
| 战斗攻击 | 体格 | 反应 | 幸运 |
| 战斗防御 | 体格 | 意志 | 反应 |
| 改造制造 | 智识 | 反应 | 意志 |
| 训练晋升 | 智识 | 反应 | 意志 |
| 探索发现 | 幸运 | 反应 | 智识 |
| 社交说服 | 魅力 | 智识 | 意志 |
| 躲避逃跑 | 反应 | 幸运 | 体格 |

## 4. 等级加成
街头人0 | 跑者5 | 潜影者12 | 雇佣猎手20 | 战术大师30 | 企业特使42 | 幽网主宰55 | 城邦执掌70 | 传说级88
阶段：试用+0 | 稳定+2 | 强化+4 | 突破+6 | 极限+8

## 5. 难度与结果
| 难度 | 基准值 | 典型场景 |
|-----|-------|---------|
| 极易 | 10 | 日常小事 |
| 简单 | 20 | 基础操作 |
| 普通 | 35 | 正常挑战 |
| 困难 | 50 | 需要努力 |
| 艰难 | 70 | 高危任务 |
| 极难 | 90 | 生死边缘 |

**结果判定**（最终判定值 vs 难度）：
- 大失败: < 难度-15 → 严重后果（受伤/损失/暴露）
- 失败: < 难度 → 未达成目标，可能有小代价
- 成功: ≥ 难度 → 达成目标
- 大成功: ≥ 难度+15 → 超额完成，额外收获
- 完美: ≥ 难度+30 → 完美发挥，可能触发关键突破

## 6. 输出格式（铁律）
**禁止在text正文中描述判定过程！只输出判定卡片！**
**禁止在判定卡片前添加标题！**

**完整格式**：
〖类型:结果,判定值:X,难度:Y,基础:B,骰子:D,环境:E,状态:S〗

**示例**：
〖改造:成功,判定值:52,难度:50,基础:42(智识21+等级12+技艺9),骰子:+8(幸运),环境:+2(信号70),状态:0〗
`.trim()

export const COMBAT_DAMAGE_RULES = `
## 战斗伤害
\`基础伤害=(体格+反应)×等级系数+武器伤害\`
\`实际伤害=基础伤害-(对方体格+护甲)×等级系数\`
等级系数：跑者1/潜影者2/雇佣猎手4/战术大师8/企业特使15/幽网主宰25/城邦执掌40/传说级60
`.trim()

export const NAMING_CONVENTIONS = `
# 命名约定

物品ID:\`类型_数字\` | 位置:\`城区·节点\` | 品质:\`{"quality":"民用~禁忌","grade":0-10}\`
`.trim()
